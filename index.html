<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Happy Birthday, My Love</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/TextPlugin.min.js"></script>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Cormorant+Garamond:wght@300;400;700&family=Dancing+Script:wght@400;700&display=swap");

      :root {
        --primary: #ff6b98;
        --secondary: #9b6dff;
        --accent: #ffd166;
        --light: #ffeaf2;
        --dark: #33172d;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Cormorant Garamond", serif;
        background-color: var(--dark);
        color: var(--light);
        overflow-x: hidden;
        height: 100vh;
      }

      .loader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: var(--dark);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
      }

      .loader-heart {
        color: var(--primary);
        font-size: 3rem;
        animation: pulse 1.5s infinite;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
          opacity: 1;
        }
        50% {
          transform: scale(1.5);
          opacity: 0.8;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }

      .loader-heart-end {
        color: var(--primary);
        font-size: 2rem;
        animation: pulseEnd 1.5s infinite;
      }

      @keyframes pulseEnd {
        0% {
          transform: scale(1);
          opacity: 1;
        }
        50% {
          transform: scale(1.25);
          opacity: 0.9;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }

      .welcome-screen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(
          ellipse at center,
          #33172d 0%,
          #1a0b17 100%
        );
        z-index: 100;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        padding: 2rem;
      }

      .petal-container {
        position: absolute;
        width: 100%;
        height: 100%;
        overflow: hidden;
        pointer-events: none;
      }

      .petal {
        position: absolute;
        width: 20px;
        height: 20px;
        background-image: radial-gradient(
          circle at 10px 10px,
          var(--primary),
          var(--secondary)
        );
        border-radius: 100% 0 100% 0;
        opacity: 0.8;
        top: -20px;
      }

      .star {
        position: absolute;
        width: 3px;
        height: 3px;
        background-color: white;
        border-radius: 50%;
        opacity: 0;
      }

      .welcome-title {
        font-family: "Dancing Script", cursive;
        font-size: 4rem;
        font-weight: 700;
        color: var(--light);
        margin-bottom: 1.5rem;
        text-shadow: 0 0 10px rgba(255, 107, 152, 0.8);
        opacity: 0;
      }

      .welcome-subtitle {
        font-family: "Playfair Display", serif;
        font-size: 1.5rem;
        color: var(--accent);
        margin-bottom: 2rem;
        opacity: 0;
      }

      .enter-button {
        border: none;
        background-color: var(--primary);
        color: var(--light);
        padding: 1rem 2rem;
        font-family: "Cormorant Garamond", serif;
        font-size: 1.2rem;
        border-radius: 50px;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 0 15px rgba(255, 107, 152, 0.5);
        opacity: 0;
        letter-spacing: 1px;
      }

      .enter-button:hover {
        background-color: var(--secondary);
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(155, 109, 255, 0.5);
      }

      main {
        position: relative;
        width: 100%;
        overflow: hidden;
      }

      section {
        min-height: 100vh;
        padding: 3rem 1rem;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        position: relative;
      }

      .intro {
        background: radial-gradient(
          ellipse at center,
          #33172d 0%,
          #1a0b17 100%
        );
        text-align: center;
      }

      .glowing-heart {
        position: absolute;
        font-size: 5rem;
        color: var(--primary);
        opacity: 0.2;
        z-index: -1;
      }

      .title-container {
        margin-bottom: 1rem;
        position: relative;
      }

      .main-title {
        font-family: "Dancing Script", cursive;
        font-size: 4rem;
        font-weight: 700;
        color: var(--light);
        margin-bottom: 1rem;
        opacity: 0;
        position: relative;
      }

      .subtitle {
        font-family: "Playfair Display", serif;
        font-size: 1.5rem;
        color: var(--accent);
        opacity: 0;
      }

      .typewriter-text {
        display: inline-block;
        border-right: 2px solid var(--light);
        padding-right: 5px;
        font-family: "Playfair Display", serif;
        font-size: 2rem;
        color: var(--light);
        margin: 2rem 0;
        min-height: 2.5rem;
      }

      .gallery {
        background: linear-gradient(135deg, #33172d 0%, #1a0b17 100%);
        padding: 5rem 1rem;
      }

      .gallery-title {
        font-family: "Dancing Script", cursive;
        font-size: 3rem;
        margin-bottom: 3rem;
        color: var(--accent);
        text-align: center;
        position: relative;
        opacity: 0;
      }

      .gallery-title::after {
        content: "";
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        width: 100px;
        height: 2px;
        background: linear-gradient(
          to right,
          transparent,
          var(--accent),
          transparent
        );
      }

      .carousel-container {
        width: 100%;
        max-width: 500px;
        height: 550px;
        margin: 0 auto;
        position: relative;
        overflow: hidden;
        border-radius: 10px;
        box-shadow: 0 0 30px rgba(255, 107, 152, 0.3);
        opacity: 0;
      }

      .carousel {
        width: 100%;
        height: 100%;
        position: relative;
      }

      .carousel-item {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .carousel-item.active {
        opacity: 1;
      }

      .carousel-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .carousel-arrow {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 40px;
        height: 40px;
        background-color: rgba(0, 0, 0, 0.5);
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        cursor: pointer;
        z-index: 10;
        transition: all 0.3s ease;
      }

      .carousel-arrow:hover {
        background-color: rgba(255, 107, 152, 0.7);
      }

      .prev {
        left: 10px;
      }

      .next {
        right: 10px;
      }

      .messages {
        background: radial-gradient(
          ellipse at center,
          #33172d 0%,
          #1a0b17 100%
        );
        padding: 5rem 1rem;
      }

      .messages-title {
        font-family: "Dancing Script", cursive;
        font-size: 3rem;
        margin-bottom: 3rem;
        color: var(--accent);
        text-align: center;
        position: relative;
        opacity: 0;
      }

      .messages-title::after {
        content: "";
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        width: 100px;
        height: 2px;
        background: linear-gradient(
          to right,
          transparent,
          var(--accent),
          transparent
        );
      }

      .messages-container {
        display: flex;
        flex-direction: column;
        gap: 3rem;
        max-width: 800px;
        margin: 0 auto;
      }

      .message-card {
        background: rgba(26, 11, 23, 0.5);
        border-radius: 10px;
        padding: 2rem;
        border: 1px solid rgba(255, 107, 152, 0.2);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        opacity: 0;
        transform: translateY(30px);
        position: relative;
        overflow: hidden;
      }

      .message-card::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(
          circle at center,
          var(--primary) 0%,
          transparent 70%
        );
        opacity: 0.05;
        z-index: -1;
      }

      .message-text {
        font-family: "Cormorant Garamond", serif;
        font-size: 1.3rem;
        color: var(--light);
        line-height: 1.6;
        margin-bottom: 1rem;
        position: relative;
      }

      .message-text::before {
        content: '"';
        font-family: "Playfair Display", serif;
        font-size: 3rem;
        position: absolute;
        top: -1.5rem;
        left: -1rem;
        color: var(--primary);
        opacity: 0.3;
      }

      .message-text::after {
        content: '"';
        font-family: "Playfair Display", serif;
        font-size: 3rem;
        position: absolute;
        bottom: -2.5rem;
        right: -1rem;
        color: var(--primary);
        opacity: 0.3;
      }

      .message-author {
        font-family: "Dancing Script", cursive;
        font-size: 1.5rem;
        color: var(--accent);
        text-align: right;
      }

      .final {
        background: linear-gradient(135deg, #33172d 0%, #1a0b17 100%);
        height: 100vh;
        position: relative;
        overflow: hidden;
      }

      .final-content {
        text-align: center;
        position: relative;
        z-index: 2;
      }

      .final-title {
        font-family: "Dancing Script", cursive;
        font-size: 4rem;
        margin-bottom: 2rem;
        color: var(--light);
        opacity: 0;
      }

      .final-message {
        font-family: "Playfair Display", serif;
        font-size: 1.5rem;
        color: var(--accent);
        max-width: 800px;
        margin: 0 auto 3rem;
        line-height: 1.8;
        opacity: 0;
      }

      .heart-container {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        pointer-events: none;
        z-index: 1;
      }

      .floating-heart {
        position: absolute;
        color: var(--primary);
        opacity: 0;
        transform: scale(0);
      }

      .signature {
        font-family: "Dancing Script", cursive;
        font-size: 2.5rem;
        color: var(--primary);
        margin-top: 2rem;
        opacity: 0;
      }

      .music-control {
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        cursor: pointer;
        z-index: 100;
        box-shadow: 0 0 10px rgba(255, 107, 152, 0.5);
        opacity: 0;
      }

      .music-control:hover {
        background-color: rgba(155, 109, 255, 0.7);
      }

      .scroll-down {
        position: absolute;
        bottom: 30px;
        left: 50%;
        transform: translateX(-50%);
        color: var(--light);
        font-size: 2rem;
        animation: bounce 2s infinite;
        cursor: pointer;
        opacity: 0;
      }

      @keyframes bounce {
        0%,
        20%,
        50%,
        80%,
        100% {
          transform: translateY(0) translateX(-50%);
        }
        40% {
          transform: translateY(-20px) translateX(-50%);
        }
        60% {
          transform: translateY(-10px) translateX(-50%);
        }
      }

      @media screen and (max-width: 768px) {
        .welcome-title,
        .main-title,
        .final-title {
          font-size: 3rem;
        }

        .welcome-subtitle,
        .subtitle,
        .typewriter-text,
        .final-message {
          font-size: 1.2rem;
        }

        .gallery-title,
        .messages-title {
          font-size: 2.5rem;
        }

        .carousel-container {
          height: 300px;
        }

        .message-text {
          font-size: 1.1rem;
        }

        .message-author {
          font-size: 1.3rem;
        }

        .signature {
          font-size: 2rem;
        }
      }
      .glowing-heart {
    position: absolute;
    z-index: 1;
    pointer-events: none;
}

.confetti-piece {
    position: absolute;
    z-index: 5;
    pointer-events: none;
}
.floating-element {
    position: absolute;
    z-index: 2;
    pointer-events: none;
    border-radius: 50%;
    will-change: transform;
}

.floating-balloon {
    position: absolute;
    z-index: 2;
    pointer-events: none;
}

.balloon {
    position: relative;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
}

.balloon.small {
    width: 30px;
    height: 40px;
}

.balloon.medium {
    width: 50px;
    height: 60px;
}

.balloon.large {
    width: 70px;
    height: 80px;
}

.heart-balloon {
    border-radius: 0;
    transform: rotate(45deg);
}

.heart-balloon:before, 
.heart-balloon:after {
    content: "";
    width: inherit;
    height: inherit;
    background-color: inherit;
    border-radius: 50%;
    position: absolute;
}

.heart-balloon:before {
    top: -50%;
    left: 0;
}

.heart-balloon:after {
    top: 0;
    left: -50%;
}

.string {
    position: absolute;
    top: 100%;
    left: 50%;
    width: 2px;
    height: 60px;
    background-color: rgba(255,255,255,0.5);
    transform: translateX(-50%);
}

.floating-element.star {
    background: transparent !important;
    border: 2px solid;
    clip-path: polygon(
        50% 0%, 
        61% 35%, 
        98% 35%, 
        68% 57%, 
        79% 91%, 
        50% 70%, 
        21% 91%, 
        32% 57%, 
        2% 35%, 
        39% 35%
    );
    width: 20px !important;
    height: 20px !important;
}

.confetti-piece {
    position: absolute;
    width: 8px;
    height: 8px;
    z-index: 10;
    pointer-events: none;
    border-radius: 50%;
}
body {
  overflow: -moz-scrollbars-none;  /* Old Firefox */
}

body::-webkit-scrollbar {
  width: 0 !important;  /* Old Chrome/Safari */
}
    </style>
  </head>
  <body>
    <!-- Loader -->
    <div class="loader">
      <i class="fas fa-heart loader-heart"></i>
      <p style="position: absolute; margin-top: 100px" class="message-author">
        Loading Your Special Surprise...
      </p>
    </div>

    <!-- Welcome Screen -->
    <div class="welcome-screen">
      <div class="petal-container"></div>
      <h1 class="welcome-title">Happy Birthday</h1>
        <p class="welcome-subtitle">To the one who never fails to put a smile on my face...</p>
      <button class="enter-button music-control">Begin Journey</button>
    </div>

    <main>
      <!-- Intro Section -->
      <section class="intro">
        <div class="title-container">
                <h1 class="main-title">Happy Birthday, My Dear Subbu  <i class="fas fa-heart loader-heart"></i></h1>
          <p class="subtitle">Today is all about you</p>
        </div>
        <div class="typewriter-text"></div>
        <div class="scroll-down">
          <i class="fas fa-chevron-down"></i>
        </div>
      </section>

      <!-- Gallery Section -->
      <section class="gallery">
        <h2 class="gallery-title">Beautiful Memories</h2>
        <div class="carousel-container">
          <div class="carousel">
            <div class="carousel-item active">
              <img
                src="./918019244007_status_ac90d3fa81a0408e9faa4f3f5f9e30011.jpg"
                alt="Beautiful moment 1"
              />
            </div>
            <div class="carousel-item">
              <img
                src="./IMG_20230703_130252_352.jpg"
                alt="Beautiful moment 2"
              />
            </div>
            <div class="carousel-item">
              <img
                src="./IMG_20230711_092249_649.jpg"
                alt="Beautiful moment 3"
              />
            </div>
            <div class="carousel-item active">
              <img
                src="./IMG_20230810_095835_916.jpg"
                alt="Beautiful moment 4"
              />
            </div>
            <div class="carousel-item">
              <img
                src="./Picsart_22-05-18_11-47-20-701.jpg"
                alt="Beautiful moment 5"
              />
            </div>
            <div class="carousel-item">
              <img
                src="./Screenshot_2023-07-03-13-05-48-14_6012fa4d4ddec268fc5c7112cbb265e7.jpg"
                alt="Beautiful moment 6"
              />
            </div>
          </div>
          <div class="carousel-arrow prev">
            <i class="fas fa-chevron-left"></i>
          </div>
          <div class="carousel-arrow next">
            <i class="fas fa-chevron-right"></i>
          </div>
        </div>
      </section>

      <!-- Messages Section -->
      <section class="messages">
        <h2 class="messages-title">Love Notes</h2>
        <div class="messages-container">
          <div class="message-card">
            <p class="message-text">
              Every moment spent with you is a treasure I hold close to my
              heart. Your smile illuminates my darkest days, and your love gives
              meaning to my existence.
            </p>
            <p class="message-author">- With Love</p>
          </div>
          <div class="message-card">
            <p class="message-text">
              You are the dream I never knew I had, the wish my heart made
              without me knowing. On your special day, I wish you all the
              happiness that you have brought into my life.
            </p>
            <p class="message-author">- Forever Yours</p>
          </div>
          <div class="message-card">
            <p class="message-text">
              Like stars that guide sailors home, your love guides me through
              life's storms. Happy birthday to the most beautiful soul I've ever
              known.
            </p>
            <p class="message-author">- All My Heart</p>
          </div>
        </div>
      </section>

      <!-- Final Section -->
      <section class="final">
        <div class="heart-container"></div>
        <div class="final-content">
          <h2 class="final-title">Happy Birthday Subbu</h2>
          <p class="final-message">
            As you celebrate another year of your beautiful life, know that my
            heart beats only for you. You are my sunshine, my moonlight, my
            starry sky. May this year bring you endless joy, countless reasons
            to smile, and all the love your heart can hold.
          </p>
          <p class="signature">Forever Yours</p>
        </div>
        <svg
          width="150"
          height="150"
          viewBox="0 0 200 200"
          class="loader-heart-end"
          style="margin-top: 15px"
        >
          <path
            id="heart-path"
            d="M100,180c-8.2-7.4-81-58.1-81-110c0-31.2,21.8-50,44-50c13.5,0,27.2,7.7,37,20c9.8-12.3,23.5-20,37-20c22.2,0,44,18.8,44,50C181,121.9,108.2,172.6,100,180z"
            fill="#ff6b8b"
            stroke="white"
            stroke-width="3"
          ></path>
        </svg>
      </section>
    </main>

    <!-- Music Control -->
    <!-- <div class="music-control">
      <i class="fas fa-volume-up"></i>
    </div> -->

    <script>
      // Initialize GSAP and ScrollTrigger
      gsap.registerPlugin(ScrollTrigger, TextPlugin);

      // Background music
      const music = new Audio("./music.mp3"); // Placeholder URL
      music.loop = true;
      music.volume = 0.9;
      let musicPlaying = false;

      // Music control
      const musicControl = document.querySelector(".music-control");
      const musicIcon = musicControl.querySelector("i");

      musicControl.addEventListener("click", () => {
        if (musicPlaying) {
          music.pause();
          musicIcon.className = "fas fa-volume-up";
        } else {
          music.play().catch((e) => console.log("Audio playback failed:", e));
          musicIcon.className = "fas fa-volume-mute";
        }
        musicPlaying = !musicPlaying;
      });

      // Create petals for welcome screen
      const petalContainer = document.querySelector(".petal-container");
      const createPetals = () => {
        for (let i = 0; i < 50; i++) {
          const petal = document.createElement("div");
          petal.classList.add("petal");
          petal.style.left = `${Math.random() * 100}%`;
          petal.style.width = `${Math.random() * 15 + 10}px`;
          petal.style.height = `${Math.random() * 15 + 10}px`;
          petal.style.animationDelay = `${Math.random() * 5}s`;
          petal.style.opacity = Math.random() * 0.7 + 0.3;
          petalContainer.appendChild(petal);

          gsap.to(petal, {
            y: window.innerHeight + 100,
            x: `+=${Math.random() * 100 - 50}`,
            rotation: Math.random() * 360,
            duration: Math.random() * 5 + 5,
            delay: Math.random() * 5,
            ease: "power1.out",
            repeat: -1,
            repeatRefresh: true,
          });
          gsap.to("#big-heart", {
            opacity: 1,
            duration: 1,
            ease: "power2.out",
            scrollTrigger: {
              trigger: "#big-heart",
              start: "top 80%",
              toggleActions: "play none none none",
              onEnter: () => {
                animateHeart();
              },
            },
          });
        }
      };

      // Create stars
      const createStars = () => {
        for (let i = 0; i < 100; i++) {
          const star = document.createElement("div");
          star.classList.add("star");
          star.style.left = `${Math.random() * 100}%`;
          star.style.top = `${Math.random() * 100}%`;
          document.body.appendChild(star);

          gsap.to(star, {
            opacity: Math.random() * 0.7 + 0.3,
            scale: Math.random() * 2 + 1,
            duration: Math.random() * 3 + 2,
            repeat: -1,
            yoyo: true,
            ease: "sine.inOut",
          });
        }
      };

      // Create floating hearts
      const createFloatingHearts = () => {
        const heartContainer = document.querySelector(".heart-container");
        for (let i = 0; i < 30; i++) {
          const heart = document.createElement("i");
          heart.classList.add("fas", "fa-heart", "floating-heart");
          heart.style.left = `${Math.random() * 100}%`;
          heart.style.top = `${Math.random() * 100}%`;
          heart.style.fontSize = `${Math.random() * 20 + 10}px`;
          heartContainer.appendChild(heart);
        }
      };

   const createGlowingHearts = () => {
    const intro = document.querySelector(".intro");

    
     setTimeout(() => {
        for (let i = 0; i < 30; i++) {
        const element = document.createElement("div");
        element.classList.add("floating-element");
        
        // Random element properties
        const colors = ['#ff6b98', '#9b6dff', '#ffd166', '#ffeaf2'];
        const size = Math.random() * 20 + 10;
        const isStar = Math.random() > 0.7; 
        
        element.style.width = `${size}px`;
        element.style.height = `${size}px`;
        element.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        element.style.opacity = Math.random() * 0.6 + 0.2;
        
        // Position at bottom (80% chance) or middle (20% chance)
        if (Math.random() > 0.2) {
            element.style.left = `${Math.random() * 100}%`;
            element.style.bottom = `-${size}px`;
        } else {
            element.style.left = `${50 + (Math.random() * 20 - 10)}%`;
            element.style.bottom = `${40 + (Math.random() * 20)}%`;
        }
        
        // Make some elements stars
        if (isStar) {
            element.classList.add("star");
            element.style.backgroundColor = "transparent";
            element.style.borderColor = colors[Math.floor(Math.random() * colors.length)];
        }
        
        intro.appendChild(element);

        // Floating animation
        gsap.to(element, {
            y: `-=${window.innerHeight + size}`,
            x: `+=${Math.random() * 40 - 20}`,
            rotation: isStar ? 360 : Math.random() * 90 - 45,
            duration: Math.random() * 15 + 15,
            ease: "power1.out",
            delay: Math.random() * 5,
            onComplete: () => element.remove()
        });
    }
    
    }, 5000);
    
    // 2. Confetti function that can be called multiple times
    const createConfetti = () => {
        for (let i = 0; i < 100; i++) {
            setTimeout(() => {
                const confetti = document.createElement("div");
                confetti.style.position = "absolute";
                confetti.style.width = `${Math.random() * 10 + 5}px`;
                confetti.style.height = `${Math.random() * 10 + 5}px`;
                confetti.style.backgroundColor = getRandomColor();
                confetti.style.borderRadius = Math.random() > 0.5 ? "50%" : "0";
                confetti.style.left = "50%";
                confetti.style.top = "50%";
                confetti.style.zIndex = "10";
                intro.appendChild(confetti);

                gsap.to(confetti, {
                    x: Math.random() * 600 - 300,
                    y: Math.random() * 600 - 300,
                    rotation: Math.random() * 360,
                    opacity: 0,
                    duration: Math.random() * 3 + 2,
                    ease: "power2.out",
                    onComplete: () => confetti.remove()
                });
            }, i * 20);
        }
    };

    // 3. Trigger confetti immediately and repeat 3 times
    createConfetti(); // First explosion
    
    setTimeout(createConfetti, 9000); 
};
      // Carousel functionality
      const setupCarousel = () => {
        const carouselItems = document.querySelectorAll(".carousel-item");
        const prevBtn = document.querySelector(".prev");
        const nextBtn = document.querySelector(".next");
        let currentIndex = 0;

        const goToSlide = (index) => {
          carouselItems.forEach((item) => item.classList.remove("active"));

          if (index < 0) {
            currentIndex = carouselItems.length - 1;
          } else if (index >= carouselItems.length) {
            currentIndex = 0;
          } else {
            currentIndex = index;
          }

          carouselItems[currentIndex].classList.add("active");
        };

        prevBtn.addEventListener("click", () => goToSlide(currentIndex - 1));
        nextBtn.addEventListener("click", () => goToSlide(currentIndex + 1));

        // Auto slide
        setInterval(() => goToSlide(currentIndex + 1), 5000);
      };

      // Initialize all animations
      const initAnimations = () => {
        // Loader animation
        gsap.to(".loader", {
          opacity: 0,
          duration: 2.5,
          delay: 1,
          onComplete: () => {
            document.querySelector(".loader").style.display = "none";
          },
        });

        // Welcome screen animations
        gsap.to(".welcome-title", {
          opacity: 1,
          y: 0,
          duration: 1.5,
          delay: 2.5,
          ease: "back.out(1.7)",
        });

        gsap.to(".welcome-subtitle", {
          opacity: 1,
          y: 0,
          duration: 1.5,
          delay: 3,
          ease: "back.out(1.7)",
        });

        gsap.to(".enter-button", {
          opacity: 1,
          y: 0,
          duration: 1.5,
          delay: 3.5,
          ease: "back.out(1.7)",
        });

        // Music control animation
        gsap.to(".music-control", {
          opacity: 1,
          duration: 1,
          delay: 4,
        });

        // Enter button event
        document
          .querySelector(".enter-button")
          .addEventListener("click", () => {
            gsap.to(".welcome-screen", {
              opacity: 0,
              duration: 1.5,
              onComplete: () => {
                document.querySelector(".welcome-screen").style.display =
                  "none";

                // Start main content animations
                gsap.to(".main-title", {
                  opacity: 1,
                  y: 0,
                  duration: 1.5,
                  ease: "back.out(1.7)",
                });

                gsap.to(".subtitle", {
                  opacity: 1,
                  y: 0,
                  duration: 1.5,
                  delay: 0.5,
                  ease: "back.out(1.7)",
                });

                gsap.to(".scroll-down", {
                  opacity: 1,
                  duration: 1,
                  delay: 2,
                });

                // Typewriter effect
                const messages = [
                  "You are the light of my life...",
                  "Every moment with you is magical...",
                  "Today we celebrate the most amazing person...",
                  "I cherish every second spent with you...",
                ];

                let currentMessageIndex = 0;

                const typeMessage = () => {
                  const message = messages[currentMessageIndex];

                  gsap.to(".typewriter-text", {
                    duration: 3,
                    text: message,
                    ease: "none",
                    onComplete: () => {
                      setTimeout(() => {
                        gsap.to(".typewriter-text", {
                          duration: 1,
                          text: "",
                          ease: "none",
                          onComplete: () => {
                            currentMessageIndex =
                              (currentMessageIndex + 1) % messages.length;
                            typeMessage();
                          },
                        });
                      }, 2000);
                    },
                  });
                };

                typeMessage();
              },
            });
          });

        // Scroll-based animations
        gsap.to(".gallery-title", {
          scrollTrigger: {
            trigger: ".gallery-title",
            start: "top 80%",
            toggleActions: "play none none none",
          },
          opacity: 1,
          y: 0,
          duration: 1.5,
          ease: "back.out(1.7)",
        });

        gsap.to(".carousel-container", {
          scrollTrigger: {
            trigger: ".carousel-container",
            start: "top 80%",
            toggleActions: "play none none none",
          },
          opacity: 1,
          scale: 1,
          duration: 1.5,
          ease: "back.out(1.7)",
        });

        gsap.to(".messages-title", {
          scrollTrigger: {
            trigger: ".messages-title",
            start: "top 80%",
            toggleActions: "play none none none",
          },
          opacity: 1,
          y: 0,
          duration: 1.5,
          ease: "back.out(1.7)",
        });

        // Animate message cards
        document.querySelectorAll(".message-card").forEach((card, index) => {
          gsap.to(card, {
            scrollTrigger: {
              trigger: card,
              start: "top 80%",
              toggleActions: "play none none none",
            },
            opacity: 1,
            y: 0,
            duration: 1.5,
            delay: index * 0.4,
            ease: "back.out(1.7)",
          });
        });

        // Final section animations
        gsap.to(".final-title", {
          scrollTrigger: {
            trigger: ".final-title",
            start: "top 80%",
            toggleActions: "play none none none",
          },
          opacity: 1,
          scale: 1,
          duration: 1.5,
          ease: "elastic.out(1, 0.5)",
        });

        gsap.to(".final-message", {
          scrollTrigger: {
            trigger: ".final-message",
            start: "top 80%",
            toggleActions: "play none none none",
          },
          opacity: 1,
          y: 0,
          duration: 1.5,
          delay: 0.5,
          ease: "back.out(1.7)",
        });

        gsap.to(".signature", {
          scrollTrigger: {
            trigger: ".signature",
            start: "top 80%",
            toggleActions: "play none none none",
          },
          opacity: 1,
          y: 0,
          duration: 1.5,
          delay: 1,
          ease: "back.out(1.7)",
        });

        // Floating hearts animation
        document.querySelectorAll(".floating-heart").forEach((heart, index) => {
          gsap.to(heart, {
            scrollTrigger: {
              trigger: ".final",
              start: "top 50%",
              toggleActions: "play none none none",
            },
            opacity: 0.7,
            scale: 1,
            duration: 0.5,
            delay: index * 0.1,
            onComplete: () => {
              gsap.to(heart, {
                y: -100 - Math.random() * 100,
                x: Math.random() * 40 - 20,
                rotation: Math.random() * 180 - 90,
                duration: Math.random() * 5 + 5,
                ease: "power1.out",
                repeat: -1,
                repeatRefresh: true,
                yoyo: true,
              });
            },
          });
        });

        // Scroll down button functionality
        document.querySelector(".scroll-down").addEventListener("click", () => {
          window.scrollTo({
            top: window.innerHeight,
            behavior: "smooth",
          });
        });
      };


      const createGalleryHearts = () => {
    const gallery = document.querySelector(".gallery");
    
    // Create 15 floating hearts in the gallery
    for (let i = 0; i < 15; i++) {
        setTimeout(() => {
            const heart = document.createElement("i");
            heart.classList.add("fas", "fa-heart", "gallery-heart");
            
            // Random position within gallery
            heart.style.left = `${Math.random() * 100}%`;
            heart.style.top = `${Math.random() * 100}%`;
            heart.style.fontSize = `${Math.random() * 20 + 15}px`;
            heart.style.color = getRandomHeartColor();
            heart.style.opacity = "0";
            heart.style.position = "absolute";
            heart.style.zIndex = "5";
            
            gallery.appendChild(heart);

            // Heart animation
            gsap.to(heart, {
                y: `-=${Math.random() * 100 + 50}`,
                x: `+=${Math.random() * 40 - 20}`,
                opacity: Math.random() * 0.5 + 0.3,
                scale: Math.random() + 0.5,
                rotation: Math.random() * 30 - 15,
                duration: Math.random() * 10 + 10,
                ease: "power1.out",
                onComplete: () => heart.remove()
            });
        }, i * 1000); // Stagger appearance by 1 second
    }
};

// Helper function for heart colors
const getRandomHeartColor = () => {
    const colors = ['#ff6b98', '#9b6dff', '#ffd166', '#ffeaf2'];
    return colors[Math.floor(Math.random() * colors.length)];
};

// Add this to your initialization
window.addEventListener('load', () => {
    // Your other initialization code...
    createGalleryHearts();
    
    // Set interval to keep creating hearts every 15 seconds
    setInterval(createGalleryHearts, 15000);
});

      // Confetti explosion effect when scrolling to final section
      const initConfettiEffect = () => {
        ScrollTrigger.create({
          trigger: ".final",
          start: "top 80%",
          onEnter: () => {
            const heartContainer = document.querySelector(".heart-container");

            for (let i = 0; i < 100; i++) {
              setTimeout(() => {
                const confetti = document.createElement("div");
                confetti.style.position = "absolute";
                confetti.style.width = `${Math.random() * 10 + 5}px`;
                confetti.style.height = `${Math.random() * 10 + 5}px`;
                confetti.style.backgroundColor = getRandomColor();
                confetti.style.borderRadius = Math.random() > 0.5 ? "50%" : "0";
                confetti.style.left = "50%";
                confetti.style.top = "50%";

                heartContainer.appendChild(confetti);

                gsap.to(confetti, {
                  x: Math.random() * 600 - 300,
                  y: Math.random() * 600 - 300,
                  rotation: Math.random() * 360,
                  opacity: 0,
                  duration: Math.random() * 3 + 2,
                  ease: "power2.out",
                  onComplete: () => {
                    confetti.remove();
                  },
                });
              }, i * 20);
            }
          },
          once: true,
        });
      };

      // Helper function for random colors
      const getRandomColor = () => {
        const colors = [
          "#ff6b98", // primary
          "#9b6dff", // secondary
          "#ffd166", // accent
          "#ff9ebc", // light primary
          "#c4a8ff", // light secondary
        ];
        return colors[Math.floor(Math.random() * colors.length)];
      };

      // Window load event
      window.addEventListener("load", () => {
        createPetals();
        createStars();
        createFloatingHearts();
        createGlowingHearts();
        setupCarousel();
        initAnimations();
        initConfettiEffect();
      });
    </script>
  </body>
</html>
